<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>시계탑</title>
<style>
  :root{--bg:#0e0e0f;--fg:#e7e7ea;--muted:#9aa0a6;--line:#1f1f22;--accent:#7aa2ff;--chip:#1b1f2a}
  *{box-sizing:border-box} html,body{height:100%}
  body{margin:0;background:var(--bg);color:var(--fg);font:14px/1.6 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial}
  a{color:inherit;text-decoration:none}
  .wrap{max-width:1100px;margin:0 auto;padding:16px}

  /* Top bar */
  .top{position:sticky;top:0;z-index:50;background:#0f1116;border-bottom:1px solid var(--line)}
  .top__in{max-width:1100px;margin:0 auto;padding:10px 16px;display:flex;align-items:center;gap:12px}
  .logo{font-weight:700}
  .tabs{margin-left:auto;display:flex;gap:8px}
  .tab{padding:8px 12px;border:1px solid var(--line);border-radius:10px;background:#121215}
  .tab[aria-selected="true"]{outline:2px solid var(--accent);border-color:transparent}

  /* Gallery */
  .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:10px}
  .card{background:#121215;border:1px solid var(--line);border-radius:14px;overflow:hidden;cursor:pointer}
  .thumb{aspect-ratio:4/3;display:block;width:100%;object-fit:cover;background:#0a0a0b}
  .meta{padding:10px 12px}
  .title{font-weight:600;margin:0 0 4px}
  .note{color:var(--muted);font-size:12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}

  /* Board */
  .board{display:grid;gap:8px}
  .row{display:grid;grid-template-columns:auto 1fr auto;gap:10px;align-items:center;border:1px solid var(--line);border-radius:12px;background:#121215;padding:10px 12px}
  .badge{font-size:12px;color:var(--muted);background:var(--chip);border:1px solid var(--line);padding:3px 8px;border-radius:999px}
  .titleL{font-weight:600}
  .muted{color:var(--muted);font-size:12px}
  .btn{border:1px solid var(--line);background:#121215;color:var(--fg);padding:6px 10px;border-radius:10px}
  .row .links{display:flex;gap:6px}
  .row .desc{color:var(--muted);margin-top:4px}

  /* Modal (image viewer) */
  .modal{position:fixed;inset:0;display:none;background:rgba(0,0,0,.85);z-index:80}
  .modal.open{display:grid;grid-template-rows:auto 1fr auto}
  .modal-head,.modal-foot{display:flex;justify-content:space-between;align-items:center;padding:10px 12px;background:rgba(20,20,24,.75);backdrop-filter:saturate(140%) blur(6px)}
  .modal-body{min-height:0;display:grid;place-items:center;padding:8px}
  .modal img{max-width:95vw;max-height:80vh;object-fit:contain}
  .kbd{font:12px/1 monospace;color:var(--muted)}
  .hidden{display:none!important}

  /* mobile */
  @media (max-width:900px){
    .row{grid-template-columns:1fr;gap:6px}
    .tabs{flex-wrap:wrap}
  }
</style>
</head>
<body>
<header class="top">
  <div class="top__in">
    <a class="logo" href="#">전국 시계탑 아카이브</a>
    <nav class="tabs" role="tablist" aria-label="보기">
      <a class="tab" data-page="gallery" href="#gallery" aria-selected="true">이미지</a>
      <a class="tab" data-page="board"   href="#board"   aria-selected="false">게시판</a>
    </nav>
  </div>
</header>

<main class="wrap">
  <!-- GALLERY -->
  <section id="sec-gallery" aria-label="이미지 갤러리">
    <div id="grid" class="grid" role="list"></div>
  </section>

  <!-- BOARD -->
  <section id="sec-board" class="hidden" aria-label="게시판">
    <div id="board" class="board"></div>
  </section>
</main>

<!-- Image Modal -->
<div class="modal" id="modal" aria-modal="true" role="dialog" aria-label="작품 뷰어">
  <div class="modal-head">
    <div id="mTitle"></div>
    <div>
      <button class="btn" id="prev" title="이전(←)">←</button>
      <button class="btn" id="next" title="다음(→)">→</button>
      <button class="btn" id="close" title="닫기(Esc)">닫기</button>
    </div>
  </div>
  <div class="modal-body">
    <img id="mImg" alt="" />
  </div>
  <div class="modal-foot">
    <div id="mNote" class="kbd"></div>
    <div id="mIndex" class="kbd"></div>
  </div>
</div>

<script>
/* ===================== 데이터 편집 영역 ===================== */
// 이미지 갤러리
const ITEMS = [
  { id:"wonju-musil-park", title:"원주 무실 체육공원 시계탑", img:"images/clock/wonju-musil-park.jpg", thumb:"images/clock/wonju-musil-park_640.jpg", note:"야간 조명 약함" },
  { id:"yanggu-rotary",    title:"양구 로터리 시계",           img:"images/clock/yanggu-rotary.jpg",                          note:"교차로 중앙" },
  { id:"danyang-susan",    title:"단양 수산면 시계탑",         img:"images/clock/danyang-susan.jpg",                          note:"작동 미확인" },
  { id:"gangneung-univ",   title:"강릉 ○○대 교정 시계",        img:"images/clock/gangneung-univ.jpg",                         note:"다면형" },
  // 추가 …
];

// 게시판(글/링크). url 없으면 순수 노트 글.
const POSTS = [
  { date:"2025-10-01", title:"작업노트: 강원권 답사", desc:"원주–양구 구간 동선 체크 및 야간광량 기록.", url:null, archive:null, tag:"노트" },
  { date:"2023-11-15", title:"빅벤 보수 완료·정규 타종 재개", desc:"해외 레퍼런스 수집용.", url:"https://www.parliament.uk/bigben", archive:"https://web.archive.org/web/20221115/https://www.parliament.uk/bigben", tag:"링크" },
  <p>내가 쓰는 글 부분</p>
  // 추가 …
];
/* ========================================================== */

const $ = (s,el=document)=>el.querySelector(s);
const $$ = (s,el=document)=>Array.from(el.querySelectorAll(s));
const byDateDesc = (a,b)=> (b.date||"").localeCompare(a.date||"");

// ---------- 탭 전환 ----------
function setPage(page){
  const isGallery = page==="gallery";
  $("#sec-gallery").classList.toggle("hidden", !isGallery);
  $("#sec-board").classList.toggle("hidden", isGallery);
  document.querySelectorAll(".tab").forEach(t=>{
    t.setAttribute("aria-selected", (t.dataset.page===page)?"true":"false");
  });
  history.replaceState(null,"", page==="gallery" ? "#gallery" : "#board");
}
function initTabs(){
  const hash = location.hash.replace("#","");
  setPage(hash==="board" ? "board" : "gallery");
  $$(".tab").forEach(t=> t.addEventListener("click",(e)=>{
    e.preventDefault();
    setPage(t.dataset.page);
  }));
  window.addEventListener("hashchange",()=>{
    const h = location.hash.replace("#","");
    setPage(h==="board"?"board":"gallery");
  });
}

// ---------- 갤러리 렌더 ----------
function card(it){
  const el = document.createElement("article");
  el.className="card"; el.setAttribute("role","listitem");
  const im = document.createElement("img");
  im.className="thumb"; im.loading="lazy"; im.decoding="async";
  im.src = it.thumb || it.img; im.alt = it.title||"";
  const meta = document.createElement("div"); meta.className="meta";
  meta.innerHTML = `<h3 class="title">${it.title||"Untitled"}</h3><div class="note">${it.note||""}</div>`;
  el.appendChild(im); el.appendChild(meta);
  el.addEventListener("click", ()=>openModalById(it.id));
  return el;
}
function renderGallery(){
  const grid = $("#grid"); grid.innerHTML="";
  ITEMS.forEach(it=> grid.appendChild(card(it)));
}

// ---------- 게시판 렌더 ----------
function row(p){
  const el = document.createElement("div");
  el.className="row";
  const left = document.createElement("span");
  left.className="badge"; left.textContent = p.tag || "노트";
  const mid = document.createElement("div");
  mid.innerHTML = `<div class="titleL">${p.title}</div>${p.desc? `<div class="desc">${p.desc}</div>`: ""}`;
  const right = document.createElement("div");
  right.className="links";
  if(p.url){ const a=document.createElement("a"); a.className="btn"; a.href=p.url; a.target="_blank"; a.rel="noopener"; a.textContent="원문"; right.appendChild(a); }
  if(p.archive){ const a=document.createElement("a"); a.className="btn"; a.href=p.archive; a.target="_blank"; a.rel="noopener"; a.textContent="아카이브"; right.appendChild(a); }
  const date = document.createElement("div");
  date.className="muted"; date.style.marginLeft="8px"; date.textContent = p.date || "";
  const wrapR = document.createElement("div");
  wrapR.style.display="flex"; wrapR.style.alignItems="center"; wrapR.style.gap="6px";
  wrapR.appendChild(right); wrapR.appendChild(date);
  el.appendChild(left); el.appendChild(mid); el.appendChild(wrapR);
  return el;
}
function renderBoard(){
  const box = $("#board"); box.innerHTML="";
  POSTS.sort(byDateDesc).forEach(p=> box.appendChild(row(p)));
}

// ---------- 이미지 모달 ----------
let current = -1; // ITEMS index
const modal=$("#modal"), mImg=$("#mImg"), mTitle=$("#mTitle"), mNote=$("#mNote"), mIndex=$("#mIndex");
function openModalById(id){
  const idx = ITEMS.findIndex(x=>x.id===id);
  openModalIndex(idx>=0?idx:0);
}
function openModalIndex(i){
  const it = ITEMS[i]; if(!it) return;
  current = i;
  mImg.src = it.img; mImg.alt = it.title||"";
  mTitle.textContent = it.title||""; mNote.textContent = it.note||"";
  mIndex.textContent = `${i+1} / ${ITEMS.length}`;
  modal.classList.add("open");
  document.body.style.overflow="hidden";
}
function closeModal(){
  modal.classList.remove("open");
  document.body.style.overflow="";
}
function next(step=1){
  if(!ITEMS.length) return;
  const i = ( (current<0?0:current) + step + ITEMS.length ) % ITEMS.length;
  openModalIndex(i);
}
$("#close").onclick = closeModal;
$("#next").onclick = ()=>next(1);
$("#prev").onclick = ()=>next(-1);
window.addEventListener("keydown",(e)=>{
  if(e.key==="Escape") closeModal();
  if(e.key==="ArrowRight") next(1);
  if(e.key==="ArrowLeft") next(-1);
});

// ---------- init ----------
function init(){
  initTabs();
  renderGallery();
  renderBoard();
  // 해시 없이 특정 작품을 열려면 ?id=slug 지원(선택)
  const id = new URLSearchParams(location.search).get("id");
  if(id){ openModalById(id); }
}
init();
</script>
</body>
</html>
